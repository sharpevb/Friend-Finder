<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Friend Finder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://code.jQuery.com/jQuery.js"></script>
</head>

<body>
    <!-- Header -->
    <section class="hero is-small is-primary is-bold">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    Friend Finder
                </h1>
                <h2 class="subtitle">
                    <p>You're ten questions away from finding your best friend!</p>
                </h2>
            </div>

        </div>
    </section>

    <!-- Title -->
    <section class="section">
        <div class="container">
            <h1 class="title" id="survey">Survey Questions</h1>
            <hr>
        </div>

        <!-- Name & Picture -->
        <div class="container">
            <h1 class="title" id="about">About You</h1>
            <h4>Name (Required)</h4>
            <input class="input is-primary is-rounded" type="text" id="name" placeholder="BeyoncÃ©">
            <h4>Photo (Required)</h4>
            <input class="input is-primary is-rounded" type="text" id="photo" placeholder="URL">
            <hr>
        </div>

        <!-- QUESTIONS -->

        <!-- Question 1 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 1</h1>
            <h2 id="question">You enjoy social events with lots of people.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question1">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 2 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 2</h1>
            <h2 id="question">You prefer to travel with an itinerary rather than spontaneous plans.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question2">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question 3 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 3</h1>
            <h2 id="question">You overthink things.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question3">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 4 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 4</h1>
            <h2 id="question">You'd rather stay home and relax than go out.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question4">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 5 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 5</h1>
            <h2 id="question">You prefer beer over wine.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question5">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 6 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 6</h1>
            <h2 id="question">You consider yourself an extrovert.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question6">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 7 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 7</h1>
            <h2 id="question">You prefer spring and summer over fall and winter.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question7">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 8 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 8</h1>
            <h2 id="question">When you're with a group of people you don't know, it's easy for you to start up a
                conversation.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question8">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 9 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 9</h1>
            <h2 id="question">Having job/life experience in a field is just as valuable as a degree in that field.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question9">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Question 10 -->
        <div class="container">
            <h1 class="title" id="question-title">Question 10</h1>
            <h2 id="question">You prefer to live in the city than in the country.</h2>
            <div class="field">
                <div class="control">
                    <div class="select is-primary is-rounded">
                        <select id="question10">
                            <option value="">Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <!-- Submit Button -->
        <div>
            <button type="button" class="button is-rounded is-primary" id="submit-button"
                data-target="#friendModal">Submit</button>
        </div>
        <br>
        <hr>
        <div>
            <p><a target="_blank" href="/api/survey">API Friends List</a> // <a target="_blank"
                    href="https://github.com/sharpevb/Friend-Finder">GitHub Repo</a></p>
        </div>
    </section>

    <!-- Results Modal -->
    <div id="friend-modal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title">Your new BFF is...</p>
                <a href="/survey"><button id="modal-close" class="delete" aria-label="close"></button></a>
            </header>
            <section class="modal-card-body">
                <h2 id="matchName"></h2>
                <img id="matchImg" src=""></img>
            </section>
            <footer class="modal-card-foot">
                <a href="/survey"><button class="button is-rounded is-primary" id="return-button">Return</button></a>
            </footer>
        </div>
    </div>

    <script type="text/javascript">
        // Modal opening on Submit button
        $("#submit-button").on("click", function () {
            $("#friend-modal").addClass("is-active");            
            event.preventDefault();

            var valid = true;

            if ($("#userName").val() === "" || $("#userPhoto").val() === "") {
                valid = false;
            } else if (
                $("#question1").val() === "" ||
                $("#question2").val() === "" ||
                $("#question3").val() === "" ||
                $("#question4").val() === "" ||
                $("#question5").val() === "" ||
                $("#question6").val() === "" ||
                $("#question7").val() === "" ||
                $("#question8").val() === "" ||
                $("#question9").val() === "" ||
                $("#question10").val() === ""
            ) {
                valid = false;
            }
            // If everything is filled in on sumbit
            if (valid === true) {
                var userData = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        parseInt($("#question1").val()),
                        parseInt($("#question2").val()),
                        parseInt($("#question3").val()),
                        parseInt($("#question4").val()),
                        parseInt($("#question5").val()),
                        parseInt($("#question6").val()),
                        parseInt($("#question7").val()),
                        parseInt($("#question8").val()),
                        parseInt($("#question9").val()),
                        parseInt($("#question10").val())
                    ]
                };
                $.post("/api/friends", userData, function (data) {
                    $("#matchName").text(data.name);
                    $("#matchImg").attr("src", data.photo);
                });
            }

            // Modal closing
            $("#modal-close", "#return-button").on("click", function () {
                $("#modal-close", "#return-button").removeClass("active");
            }); 

        })  
        
    </script>
</body>

</html>